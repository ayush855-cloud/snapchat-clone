(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{70:function(e,c,t){},74:function(e,c,t){},82:function(e,c,t){},87:function(e,c,t){},88:function(e,c,t){},89:function(e,c,t){},90:function(e,c,t){},91:function(e,c,t){},92:function(e,c,t){"use strict";t.r(c);var a=t(2),s=t.n(a),n=t(28),i=t.n(n),r=(t(70),t(30)),o=t(11),j=t(108),l=t(13),d=t(109),u=t(110),b=t(111),h=t(112),m=t(113),p=t(114),O=t(115),f=t(116),x=t(36),g=Object(x.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,c){e.cameraImage=c.payload},resetCameraImage:function(e){e.cameraImage=null}}}),v=g.actions,_=v.setCameraImage,N=v.resetCameraImage,w=function(e){return e.camera.cameraImage},C=g.reducer,I=t(121),k=(t(74),t(33)),S=k.a.initializeApp({apiKey:"AIzaSyC2TY4r61QbqmPC2QAIuuX40x_evxijCX0",authDomain:"snapchat-clone-a8d7c.firebaseapp.com",projectId:"snapchat-clone-a8d7c",storageBucket:"snapchat-clone-a8d7c.appspot.com",messagingSenderId:"464161771184",appId:"1:464161771184:web:772f68d7d4ae194a4d3575"}).firestore(),y=k.a.auth(),P=k.a.storage(),U=new k.a.auth.GoogleAuthProvider,A=Object(x.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,c){e.user=c.payload},logout:function(e){e.user=null}}}),T=A.actions,z=T.login,E=T.logout,R=function(e){return e.app.user},B=A.reducer,D=t(4);var F=function(){var e=Object(o.f)(),c=Object(l.c)(w),t=Object(l.c)(R),s=Object(l.b)();return Object(a.useEffect)((function(){c||e.replace("/")}),[c,e]),Object(D.jsxs)("div",{className:"preview",children:[Object(D.jsx)(j.a,{onClick:function(){s(N())},className:"preview_close"}),Object(D.jsxs)("div",{className:"preview__toolbarRight",children:[Object(D.jsx)(d.a,{}),Object(D.jsx)(u.a,{}),Object(D.jsx)(b.a,{}),Object(D.jsx)(h.a,{}),Object(D.jsx)(m.a,{}),Object(D.jsx)(p.a,{}),Object(D.jsx)(O.a,{})]}),Object(D.jsx)("img",{src:c,className:"captureImage",alt:"imag"}),Object(D.jsxs)("div",{className:"preview__footer",children:[Object(D.jsx)("h2",{children:"Send now"}),Object(D.jsx)(f.a,{onClick:function(){var a=Object(I.a)();P.ref("posts/".concat(a)).putString(c,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){P.ref("posts").child(a).getDownloadURL().then((function(c){S.collection("posts").add({imageUrl:c,username:t.username,read:!1,profilePic:t.profilePic,timestamp:k.a.firestore.FieldValue.serverTimestamp()}),e.replace("/chats")}))}))},className:"preview__sendIcon"})]})]})},L=t(61),V=t.n(L),J=(t(82),t(47)),M=t.n(J),Q={width:250,height:400,facingMode:"user"};var W=function(){var e=Object(o.f)(),c=Object(a.useRef)(null),t=Object(l.b)(),n=s.a.useCallback((function(){var a=c.current.getScreenshot();t(_(a)),e.push("/preview")}),[c,t,e]);return Object(D.jsxs)("div",{className:"webcamCapture",children:[Object(D.jsx)(V.a,{audio:!1,height:Q.height,ref:c,screenshotFormat:"image/jpeg",width:Q.width,videoConstraints:Q}),Object(D.jsx)(M.a,{className:"webcamCapture_button",onClick:n,fontSize:"large"})]})},X=(t(87),t(42)),q=t(122),G=t(118),K=t(119),Y=(t(88),t(117)),H=(t(89),t(63));function Z(e){var c=e.id,t=e.profilePic,a=e.username,s=e.timestamp,n=e.imageUrl,i=e.read,r=Object(o.f)(),j=Object(l.b)();return Object(D.jsxs)("div",{onClick:function(){i||(j(_(n)),S.collection("posts").doc(c).set({read:!0},{merge:!0})),r.push("/chats/view")},className:"chat",children:[Object(D.jsx)(q.a,{src:t,className:"chat_avatar"}),Object(D.jsxs)("div",{className:"chat__info",children:[Object(D.jsx)("h4",{children:a}),Object(D.jsxs)("p",{children:[!i&&"Tap to view - ",Object(D.jsx)(H.a,{date:new Date(null===s||void 0===s?void 0:s.toDate()).toUTCString()})]})]}),!i&&Object(D.jsx)(Y.a,{className:"chat__readIcon"})]})}function $(){var e=Object(a.useState)([]),c=Object(X.a)(e,2),t=c[0],s=c[1],n=Object(l.c)(R),i=Object(l.b)(),r=Object(o.f)();Object(a.useEffect)((function(){S.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[t]);return Object(D.jsxs)("div",{className:"chats",children:[Object(D.jsxs)("div",{className:"chats__header",children:[Object(D.jsx)(q.a,{className:"chats__avatar",src:n.profilePic,onClick:function(){y.signOut()}}),Object(D.jsxs)("div",{className:"chats__search",children:[Object(D.jsx)(G.a,{className:"chats__searchIcon"}),Object(D.jsx)("input",{placeholder:"friends",type:"text"})]}),Object(D.jsx)(K.a,{className:"chats__chatIcon"})]}),Object(D.jsx)("div",{className:"chat__posts",children:t.map((function(e){var c=e.id,t=e.data,a=t.profilePic,s=t.username,n=t.timestamp,i=t.imageUrl,r=t.read;return Object(D.jsx)(Z,{id:c,username:s,timestamp:n,imageUrl:i,read:r,profilePic:a},c)}))}),Object(D.jsx)(M.a,{className:"chats__takepicicon",onClick:function(){i(N()),r.push("/")},fontSize:"large"})]})}t(90);var ee=t(62);function ce(){var e=Object(l.c)(w),c=Object(o.f)(),t=function(){c.replace("/chats")};return Object(a.useEffect)((function(){e||t()}),[e]),Object(D.jsxs)("div",{className:"chatView",children:[Object(D.jsx)("img",{src:e,onClick:t,alt:""}),Object(D.jsx)("div",{className:"chatView__timer",children:Object(D.jsx)(ee.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:10,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var c=e.remainingTime;return 0===c&&t(),c}})})]})}t(91);var te=t(120);function ae(){var e=Object(l.b)();return Object(D.jsx)("div",{className:"login",children:Object(D.jsxs)("div",{className:"login__container",children:[Object(D.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(D.jsx)(te.a,{className:"sign_in",variant:"outlined",onClick:function(){y.signInWithPopup(U).then((function(c){e(z({username:c.user.displayName,profilePic:c.user.photoURL,id:c.user.uid}))})).catch((function(e){alert(e.messages)}))},children:"Sign in"})]})})}var se=function(){var e=Object(l.c)(R),c=Object(l.b)();return Object(a.useEffect)((function(){y.onAuthStateChanged((function(e){c(e?z({username:e.displayName,profilePic:e.photoURL,id:e.uid}):E())}))}),[c]),Object(D.jsx)("div",{className:"app",children:Object(D.jsx)(r.a,{children:e?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("img",{className:"app__logo",src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(D.jsx)("div",{className:"app__body",children:Object(D.jsx)("div",{className:"body__background",children:Object(D.jsxs)(o.c,{children:[Object(D.jsx)(o.a,{path:"/chats/view",children:Object(D.jsx)(ce,{})}),Object(D.jsx)(o.a,{path:"/chats",children:Object(D.jsx)($,{})}),Object(D.jsx)(o.a,{path:"/preview",children:Object(D.jsx)(F,{})}),Object(D.jsx)(o.a,{exact:!0,path:"/",children:Object(D.jsx)(W,{})})]})})})]}):Object(D.jsx)(ae,{})})})},ne=Object(x.a)({reducer:{app:B,camera:C}});i.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(l.a,{store:ne,children:Object(D.jsx)(se,{})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.ec0d6469.chunk.js.map